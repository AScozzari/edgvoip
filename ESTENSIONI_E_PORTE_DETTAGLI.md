# üìû ESTENSIONI DEMO E CONFIGURAZIONE PORTE

**Server:** 93.93.113.13  
**Tenant:** demo  
**SIP Domain:** demo.edgvoip.it  
**Data:** 25 Ottobre 2025  

---

## üë• ESTENSIONI TENANT DEMO

### ‚úÖ Estensione 2000

| Campo | Valore |
|-------|--------|
| **ID Database** | e92652cd-2135-4a0b-a79a-258bd426461c |
| **Extension** | 2000 |
| **Password** | test123456 |
| **Display Name** | Demo Extension 2000 |
| **Domain** | demo.edgvoip.it |
| **SIP URI** | sip:2000@demo.edgvoip.it |
| **Status** | active ‚úÖ |
| **Tenant Slug** | demo |
| **Tenant ID** | 42b7b735-7994-4c54-a451-6ba67cb68f60 |

**Configurazione Softphone:**
```
Server SIP:     93.93.113.13
Porta:          5060
Username:       2000
Password:       test123456
Domain:         demo.edgvoip.it
Transport:      UDP (preferito) o TCP
```

---

### ‚úÖ Estensione 2001

| Campo | Valore |
|-------|--------|
| **ID Database** | 611c4dec-e12a-4e59-a353-56ec43227e22 |
| **Extension** | 2001 |
| **Password** | test123456 |
| **Display Name** | Demo Extension 2001 |
| **Domain** | demo.edgvoip.it |
| **SIP URI** | sip:2001@demo.edgvoip.it |
| **Status** | active ‚úÖ |
| **Tenant Slug** | demo |
| **Tenant ID** | 42b7b735-7994-4c54-a451-6ba67cb68f60 |

**Configurazione Softphone:**
```
Server SIP:     93.93.113.13
Porta:          5060
Username:       2001
Password:       test123456
Domain:         demo.edgvoip.it
Transport:      UDP (preferito) o TCP
```

---

## üåê PORTE UTILIZZATE DAL SISTEMA

### üìä TABELLA COMPLETA PORTE

| Porta | Protocollo | Servizio | Bind Address | Direzione | Descrizione | Firewall Status |
|-------|------------|----------|--------------|-----------|-------------|-----------------|
| **80** | TCP | Nginx | 0.0.0.0 | INBOUND | HTTP Web Server | ‚úÖ Aperta (standard) |
| **5000** | TCP | Node.js Backend | 0.0.0.0 | INBOUND | API REST | ‚ö†Ô∏è Da proteggere |
| **5060** | UDP | FreeSWITCH SIP | 93.93.113.13 | INBOUND/OUTBOUND | **SIP Signaling** | ‚úÖ **APERTA** |
| **5060** | TCP | FreeSWITCH SIP | 93.93.113.13 | INBOUND/OUTBOUND | **SIP Signaling** | ‚úÖ **APERTA** |
| **5066** | TCP | FreeSWITCH | 93.93.113.13 | INBOUND | WebSocket (WS) | ‚ö†Ô∏è Non aperta |
| **5080** | - | **NON USATA** | - | - | **Firewall aperto ma non in uso** | ‚ö†Ô∏è **INUTILE** |
| **7443** | TCP | FreeSWITCH | 93.93.113.13 | INBOUND | WebSocket Secure (WSS) | ‚ö†Ô∏è Non aperta |
| **8021** | TCP | FreeSWITCH ESL | * (all) | INBOUND | Event Socket Layer | ‚ö†Ô∏è Da proteggere |
| **16384-32768** | UDP | FreeSWITCH RTP | 93.93.113.13 | INBOUND/OUTBOUND | **Audio/Video Stream** | ‚ö†Ô∏è **DA APRIRE** |
| **5432** | TCP | PostgreSQL | 127.0.0.1 | LOCAL | Database | ‚úÖ Locale only |

---

## üî• CONFIGURAZIONE FIREWALL NECESSARIA

### ‚úÖ PORTE GI√Ä APERTE CORRETTAMENTE

```bash
# Gi√† configurate dall'utente:
5060/UDP  ‚úÖ - SIP Signaling (CORRETTO)
5060/TCP  ‚úÖ - SIP Signaling (CORRETTO)
5080/UDP  ‚ö†Ô∏è - NON USATA (pu√≤ essere chiusa)
5080/TCP  ‚ö†Ô∏è - NON USATA (pu√≤ essere chiusa)
```

### ‚ö†Ô∏è PORTE DA APRIRE URGENTEMENTE

**Per funzionamento completo VoIP serve:**

```bash
# Porte SIP (gi√† OK)
5060/UDP  ‚úÖ SIP Signaling
5060/TCP  ‚úÖ SIP Signaling (fallback)

# Porte RTP (MANCANTI - CRITICHE!)
16384-32768/UDP  ‚ö†Ô∏è RTP Media (AUDIO/VIDEO) - DA APRIRE!

# Opzionali (WebSocket SIP)
5066/TCP  ‚è≥ WebSocket SIP (per WebRTC)
7443/TCP  ‚è≥ WebSocket Secure (per WebRTC/HTTPS)
```

---

## üîß COMANDI FIREWALL

### Se usi UFW (Uncomplicated Firewall)

```bash
# Porte gi√† aperte
ufw allow 5060/udp comment "SIP Signaling"
ufw allow 5060/tcp comment "SIP Signaling TCP"

# Porte DA APRIRE (CRITICHE per audio)
ufw allow 16384:32768/udp comment "FreeSWITCH RTP Media"

# Opzionali per WebRTC
ufw allow 5066/tcp comment "FreeSWITCH WebSocket"
ufw allow 7443/tcp comment "FreeSWITCH WebSocket Secure"

# Chiudi 5080 (non usata)
ufw delete allow 5080/udp
ufw delete allow 5080/tcp

# Ricarica firewall
ufw reload
ufw status numbered
```

### Se usi iptables

```bash
# Porte gi√† aperte (5060)
iptables -A INPUT -p udp --dport 5060 -j ACCEPT
iptables -A INPUT -p tcp --dport 5060 -j ACCEPT

# Porte RTP (CRITICHE)
iptables -A INPUT -p udp --dport 16384:32768 -j ACCEPT
iptables -A OUTPUT -p udp --sport 16384:32768 -j ACCEPT

# Opzionali WebSocket
iptables -A INPUT -p tcp --dport 5066 -j ACCEPT
iptables -A INPUT -p tcp --dport 7443 -j ACCEPT

# Salva regole
iptables-save > /etc/iptables/rules.v4
```

---

## üéØ DETTAGLIO PORTE FREESWITCH

### Porta 5060 - SIP Signaling ‚úÖ
```
Protocollo:   UDP (primario) + TCP (fallback)
Bind:         93.93.113.13:5060
Uso:          Registrazione SIP, INVITE, BYE, etc.
Firewall:     ‚úÖ APERTA
Necessaria:   ‚úÖ CRITICA
Status:       ‚úÖ OPERATIVA
```

**Traffico su questa porta:**
- Registrazione estensioni 2000, 2001
- Segnalazione chiamate (INVITE, RINGING, BYE)
- Trunk Messagenet (registrazione)
- Autenticazione SIP

### Porta 5080 - NON USATA ‚ö†Ô∏è
```
Protocollo:   UDP + TCP
Stato:        NON CONFIGURATA
Uso:          Nessuno
Firewall:     Aperta ma inutile
Necessaria:   ‚ùå NO
Azione:       Pu√≤ essere chiusa
```

### Porta 5066 - WebSocket ‚è≥
```
Protocollo:   TCP
Bind:         93.93.113.13:5066
Uso:          WebRTC via WebSocket (WS)
Firewall:     ‚ö†Ô∏è NON APERTA
Necessaria:   ‚è≥ Solo per WebRTC
Status:       Non ancora utilizzata
```

### Porta 7443 - WebSocket Secure ‚è≥
```
Protocollo:   TCP
Bind:         93.93.113.13:7443
Uso:          WebRTC via WebSocket Secure (WSS)
Firewall:     ‚ö†Ô∏è NON APERTA
Necessaria:   ‚è≥ Solo per WebRTC/HTTPS
Status:       Non ancora utilizzata
```

### Porta 8021 - Event Socket Layer (ESL) ‚ö†Ô∏è
```
Protocollo:   TCP
Bind:         *:8021 (tutte le interfacce)
Uso:          API FreeSWITCH, controllo remoto
Firewall:     ‚ö†Ô∏è ESPOSTA PUBBLICAMENTE
Necessaria:   ‚úÖ Per backend, ma solo localhost
Azione:       ‚ö†Ô∏è LIMITARE A 127.0.0.1 SOLO!
```

### Porte 16384-32768 - RTP Media ‚ö†Ô∏è CRITICHE
```
Protocollo:   UDP
Bind:         93.93.113.13
Uso:          ‚≠ê AUDIO e VIDEO delle chiamate
Firewall:     ‚ö†Ô∏è NON APERTE
Necessaria:   ‚úÖ CRITICA - SENZA QUESTE NON C'√à AUDIO!
Status:       ‚ö†Ô∏è MANCANTE
```

**SENZA QUESTE PORTE NON FUNZIONA L'AUDIO!**

---

## ‚ö†Ô∏è PROBLEMA CRITICO RILEVATO

### Porta 8021 (ESL) Esposta Pubblicamente

```
Stato attuale: Bind su *:8021 (tutte le interfacce)
Problema:      Accessibile da Internet
Rischio:       Accesso non autorizzato a FreeSWITCH
Soluzione:     Limitare a localhost (127.0.0.1)
```

**Come correggere:**

1. **Modifica configurazione ESL:**
```bash
nano /usr/local/freeswitch/etc/freeswitch/autoload_configs/event_socket.conf.xml
```

Cambia da:
```xml
<param name="listen-ip" value="::"/>
```

A:
```xml
<param name="listen-ip" value="127.0.0.1"/>
```

2. **Riavvia FreeSWITCH:**
```bash
systemctl restart freeswitch
```

---

## üîí CONFIGURAZIONE FIREWALL RACCOMANDATA

### Regole Minime (Solo SIP)

```bash
# Web
ufw allow 80/tcp          # HTTP
ufw allow 443/tcp         # HTTPS (futuro)

# SIP Signaling
ufw allow 5060/udp        # SIP UDP ‚úÖ GI√Ä FATTO
ufw allow 5060/tcp        # SIP TCP ‚úÖ GI√Ä FATTO

# RTP Media (CRITICHE!)
ufw allow 16384:32768/udp # Audio/Video ‚ö†Ô∏è DA FARE!

# SSH (limitato)
ufw limit 22/tcp          # SSH con rate limiting

# Nega tutto il resto
ufw default deny incoming
ufw default allow outgoing
ufw enable
```

### Regole Complete (Con WebRTC)

```bash
# Base
ufw allow 80/tcp
ufw allow 443/tcp
ufw allow 5060/udp
ufw allow 5060/tcp
ufw allow 16384:32768/udp

# WebRTC
ufw allow 5066/tcp        # WebSocket
ufw allow 7443/tcp        # WebSocket Secure

# SSH
ufw limit 22/tcp

# Attiva
ufw enable
```

---

## üìä VERIFICA FIREWALL ATTUALE

```bash
# Verifica stato
ufw status numbered

# Verifica porte aperte
ss -tulnp | grep LISTEN
```

---

## üéØ PORTE PER TIPO DI FUNZIONALIT√Ä

### üü¢ Chiamate SIP Standard (Softphone Desktop/Mobile)

**NECESSARIE:**
```
5060/UDP  ‚úÖ SIP Signaling (gi√† aperta)
5060/TCP  ‚úÖ SIP Signaling fallback (gi√† aperta)
16384-32768/UDP  ‚ö†Ô∏è RTP Audio (DA APRIRE!)
```

**Senza porte RTP ‚Üí Chiamata connessa ma NESSUN AUDIO!**

### üîµ WebRTC (Browser, Click-to-call)

**NECESSARIE:**
```
5060/UDP  ‚úÖ SIP
16384-32768/UDP  ‚ö†Ô∏è RTP (DA APRIRE!)
5066/TCP  ‚è≥ WebSocket (da aprire se usi WebRTC)
7443/TCP  ‚è≥ WebSocket Secure (da aprire se usi WebRTC su HTTPS)
```

### üü° Gestione/Amministrazione

**NECESSARIE:**
```
80/TCP    ‚úÖ Web UI
5000/TCP  ‚ö†Ô∏è API Backend (proteggere via Nginx, non esporre direttamente)
8021/TCP  ‚ö†Ô∏è ESL (limitare a 127.0.0.1 SOLO!)
```

---

## üî¥ PORTE IN USO SUL SERVER

### Servizi Pubblici (Accessibili da Internet)

| Porta | Protocollo | Servizio | Necessaria Internet | Firewall Status |
|-------|------------|----------|---------------------|-----------------|
| 80 | TCP | Nginx HTTP | ‚úÖ S√¨ | ‚úÖ Aperta |
| 5060 | UDP | FreeSWITCH SIP | ‚úÖ S√¨ | ‚úÖ Aperta |
| 5060 | TCP | FreeSWITCH SIP | ‚úÖ S√¨ | ‚úÖ Aperta |
| 5066 | TCP | FreeSWITCH WS | ‚è≥ Solo WebRTC | ‚è≥ Chiusa |
| 7443 | TCP | FreeSWITCH WSS | ‚è≥ Solo WebRTC | ‚è≥ Chiusa |
| **16384-32768** | **UDP** | **FreeSWITCH RTP** | ‚úÖ **S√¨** | ‚ö†Ô∏è **CHIUSE** |

### Servizi Interni (Solo Localhost)

| Porta | Protocollo | Servizio | Bind Address | Esposizione |
|-------|------------|----------|--------------|-------------|
| 5000 | TCP | Backend API | 0.0.0.0 | ‚ö†Ô∏è Pubblico (proteggere) |
| 5432 | TCP | PostgreSQL | 127.0.0.1 | ‚úÖ Localhost only |
| 8021 | TCP | FreeSWITCH ESL | *:8021 | ‚ö†Ô∏è **PUBBLICO (PERICOLOSO!)** |

---

## ‚ö†Ô∏è AZIONI URGENTI FIREWALL

### 1. Apri Porte RTP (CRITICO!)

**Senza queste porte NON c'√® audio nelle chiamate!**

```bash
ufw allow 16384:32768/udp comment "FreeSWITCH RTP Media"
```

### 2. Proteggi Porta 8021 (Event Socket)

**MOLTO PERICOLOSO se esposta pubblicamente!**

```bash
# Blocca accesso esterno
ufw deny 8021/tcp

# Modifica FreeSWITCH per bind solo localhost
# Edit: /usr/local/freeswitch/etc/freeswitch/autoload_configs/event_socket.conf.xml
# Cambia: <param name="listen-ip" value="::"/> 
# In:     <param name="listen-ip" value="127.0.0.1"/>
```

### 3. Chiudi Porta 5080 (Non Usata)

```bash
ufw delete allow 5080/udp
ufw delete allow 5080/tcp
```

### 4. Proteggi Backend API (Porta 5000)

**Opzione A:** Blocca accesso diretto (usa solo via Nginx)
```bash
ufw deny 5000/tcp
# Il backend sar√† accessibile solo via Nginx reverse proxy
```

**Opzione B:** Limita a IP specifici
```bash
ufw allow from TUO_IP_UFFICIO to any port 5000
```

---

## üì° RANGE PORTE RTP SPIEGATO

### Cos'√® RTP?

**RTP (Real-time Transport Protocol)** = Protocollo che trasporta l'AUDIO e il VIDEO delle chiamate.

**Come funziona:**
1. SIP (porta 5060) = negozia la chiamata (chi chiama, chi risponde)
2. RTP (porte 16384-32768) = trasporta l'audio della conversazione

**Esempio chiamata:**
```
Softphone ‚Üí SIP INVITE ‚Üí FreeSWITCH (porta 5060)
FreeSWITCH ‚Üí SIP 200 OK ‚Üí Softphone
[Chiamata connessa]
Softphone ‚Üí RTP audio ‚Üí FreeSWITCH (porta casuale 16384-32768)
FreeSWITCH ‚Üí RTP audio ‚Üí Softphone (porta casuale 16384-32768)
```

### Perch√© Range Ampio?

FreeSWITCH assegna **2 porte UDP casuali** per ogni chiamata:
- 1 porta per l'audio in entrata
- 1 porta per l'audio in uscita

Con 30 chiamate simultanee = 60 porte usate
Range 16384-32768 = 16,384 porte disponibili

**Configurazione FreeSWITCH:**
```xml
Default RTP range: 16384-32768 UDP
Modificabile in: switch.conf.xml
```

---

## üéØ CONFIGURAZIONE CONSIGLIATA FIREWALL

### Scenario 1: Server Dedicato VoIP

```bash
# Essenziali
ufw allow 22/tcp          # SSH
ufw allow 80/tcp          # HTTP
ufw allow 443/tcp         # HTTPS
ufw allow 5060/udp        # SIP ‚úÖ
ufw allow 5060/tcp        # SIP TCP ‚úÖ
ufw allow 16384:32768/udp # RTP ‚ö†Ô∏è AGGIUNGI!

# Blocca tutto il resto
ufw default deny incoming
ufw default allow outgoing
ufw enable
```

### Scenario 2: Con WebRTC

```bash
# Base + WebRTC
ufw allow 5066/tcp        # WebSocket
ufw allow 7443/tcp        # WebSocket Secure
ufw allow 16384:32768/udp # RTP
```

### Scenario 3: Sviluppo/Test

```bash
# Pi√π permissivo per debug
ufw allow from TUO_IP to any port 8021 # ESL solo dal tuo IP
ufw allow from TUO_IP to any port 5000 # API solo dal tuo IP
```

---

## üìû TEST AUDIO

### Problema Comune: "Chiamata connessa ma nessun audio"

**Causa:** Porte RTP bloccate dal firewall

**Sintomi:**
- ‚úÖ Softphone si registra
- ‚úÖ Chiamata si connette
- ‚ùå Non si sente nulla
- ‚ùå Silenzio totale

**Soluzione:**
```bash
# Apri porte RTP
ufw allow 16384:32768/udp

# Verifica
ufw status | grep 16384
```

**Test:**
1. Chiama da 2000 al numero **9196** (echo test)
2. Parla nel microfono
3. Dovresti sentire immediatamente la tua voce

**Se non senti l'echo = Porte RTP bloccate!**

---

## üîç DIAGNOSTICA PORTE

### Verifica Porte Aperte sul Server

```bash
# Lista porte in ascolto
ss -tulnp | grep freeswitch

# Risultato atteso:
udp   ...  93.93.113.13:5060  ... freeswitch  ‚úÖ
tcp   ...  93.93.113.13:5060  ... freeswitch  ‚úÖ
tcp   ...  93.93.113.13:5066  ... freeswitch  ‚úÖ
tcp   ...  93.93.113.13:7443  ... freeswitch  ‚úÖ
tcp   ...  *:8021             ... freeswitch  ‚ö†Ô∏è (da limitare)
```

### Test Connettivit√† Esterna

```bash
# Test SIP dal tuo PC
nc -zvu 93.93.113.13 5060
# Risultato atteso: Connection to 93.93.113.13 5060 port [udp/*] succeeded!

# Test RTP
nc -zvu 93.93.113.13 16384
# Dovrebbe rispondere se porta aperta
```

### Test da FreeSWITCH

```bash
fs_cli -x "sofia status profile internal"
# Verifica: SIP-IP, RTP-IP, Ext-RTP-IP
```

---

## üìã CHECKLIST FIREWALL

### ‚úÖ Controllo Configurazione

- [x] Porta 5060 UDP aperta (SIP)
- [x] Porta 5060 TCP aperta (SIP fallback)
- [ ] **Porte 16384-32768 UDP aperte (RTP)** ‚ö†Ô∏è **MANCA!**
- [ ] Porta 5080 chiusa (non usata)
- [ ] Porta 8021 limitata a localhost
- [ ] Porta 5000 protetta (via Nginx)

---

## üéä RIEPILOGO ESTENSIONI DEMO

### Estensioni Configurate: 2

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Estensione 2000                                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Username:       2000                                    ‚îÇ
‚îÇ Password:       test123456                              ‚îÇ
‚îÇ Domain:         demo.edgvoip.it                         ‚îÇ
‚îÇ Server:         93.93.113.13:5060                       ‚îÇ
‚îÇ CallerID Out:   +39 06 8635 6924 (via Messagenet)      ‚îÇ
‚îÇ Status:         ‚úÖ ACTIVE                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Estensione 2001                                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Username:       2001                                    ‚îÇ
‚îÇ Password:       test123456                              ‚îÇ
‚îÇ Domain:         demo.edgvoip.it                         ‚îÇ
‚îÇ Server:         93.93.113.13:5060                       ‚îÇ
‚îÇ CallerID Out:   +39 06 8635 6924 (via Messagenet)      ‚îÇ
‚îÇ Status:         ‚úÖ ACTIVE                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Trunk Outbound: Messagenet

```
Gateway:        messagenet_demo
Status:         ‚úÖ REGED
Server:         sip.messagenet.it:5061
Username:       5406594427
DID Number:     +39 06 8635 6924
Ping:           30.77ms
Uptime:         Attivo
```

---

## üö® AZIONE IMMEDIATA RICHIESTA

### APRI PORTE RTP SUBITO!

**Comando rapido:**
```bash
ufw allow 16384:32768/udp
ufw reload
```

**Verifica:**
```bash
ufw status | grep 16384
```

**Risultato atteso:**
```
16384:32768/udp    ALLOW       Anywhere
```

**Senza queste porte le chiamate NON avranno audio!**

---

## üìû PIANO NUMERAZIONE COMPLETO

| Range/Numero | Tipo | Routing | Trunk | Costo |
|--------------|------|---------|-------|-------|
| **2000** | Estensione | Locale | - | Gratis |
| **2001** | Estensione | Locale | - | Gratis |
| **2000-2999** | Range Interno | Locale | - | Gratis |
| **3xxxxxxxxx** | Mobile IT | Messagenet | messagenet_demo | A consumo |
| **0xxxxxxxx** | Fisso IT | Messagenet | messagenet_demo | A consumo |
| **00xxxxxxxx** | Internazionale | Messagenet | messagenet_demo | A consumo |
| **+xxxxxxxxxx** | Internazionale | Messagenet | messagenet_demo | A consumo |
| **9196** | Echo Test | Locale | - | Gratis |
| **9664** | Hold Music | Locale | - | Gratis |

---

## ‚úÖ SISTEMA PRONTO

**Estensioni Demo:**
- ‚úÖ 2 estensioni create (2000, 2001)
- ‚úÖ Password: test123456
- ‚úÖ Domain: demo.edgvoip.it
- ‚úÖ Caricate in FreeSWITCH

**Trunk Messagenet:**
- ‚úÖ Configurato nel database
- ‚úÖ Gateway FreeSWITCH attivo
- ‚úÖ Registrato con Messagenet
- ‚úÖ Status: UP
- ‚úÖ Dialplan outbound configurato

**Firewall:**
- ‚úÖ Porta 5060 UDP/TCP aperta
- ‚ö†Ô∏è **Porte RTP 16384-32768 UDP DA APRIRE!**
- ‚ö†Ô∏è Porta 8021 da limitare a localhost
- ‚ö†Ô∏è Porta 5080 da chiudere (non usata)

---

**APRI LE PORTE RTP E IL SISTEMA SAR√Ä 100% FUNZIONANTE!** üéØ

---

**Generato il:** 25 Ottobre 2025  
**Server:** edgvoip (93.93.113.13)  
**Tenant:** demo  
**Trunk:** Messagenet ‚úÖ REGISTERED

